<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

    <!--
    Font 변경
    https://homzzang.com/b/css-71
    https://fonts.google.com/earlyaccess
    -->
    <!-- background 입히기 -->
    <style>
        @import url(//fonts.googleapis.com/earlyaccess/hanna.css);
        body {
            font-family: 'Hanna';
        }
        .top {
            width: 100%;
            height: 100px;
            background-image: url(/static/images/leaves.jpg);
        }
        .test {
            display: inline-block;
            margin-top: 15px;
        }
    </style>
</head>

<body>
<!-- background 입히기 -->
<div class="top">

</div>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <img src="/static/images/rose.jpg" width="25" height="25" class="d-inline-block align-top" alt="">
                MongoDB 프로젝트
            </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="/">Home</a>
              </li>

              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  MENU
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <!-- href  설정 -->
                  <li><a class="dropdown-item" href="/book_add">도서 등록</a></li>
    {#                    <li><a class="dropdown-item" href="/book_id_search">도서 ID 검색</a></li>#}
                    <li><a class="dropdown-item" href="/book_list">전체 조회</a></li>
                  <li><hr class="dropdown-divider">
                    <div style="color: navajowhite; background-color: darkslategray";>
                        잡동사니
                    </div>
                  </li>
                      <li><a class="dropdown-item" href="/game">미니게임 (화투)</a></li>
                      <li><a class="dropdown-item" href="/jiji">12간지</a></li>
                </ul>
              </li>

              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  검색
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <!-- href  설정 -->
                    <li><a class="dropdown-item" href="/book_search">도서 검색</a></li>
                    <li><a class="dropdown-item" href="/pharmacy_search">약국 검색</a></li> {#  #}
                </ul>
              </li>

               <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  접속 관리
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <!-- href  설정 -->
                    <li><a class="dropdown-item" href="/atlas_connect_info">접속 루트 설정</a></li>
                </ul>
              </li>

            </ul>
          </div>
            <ul>
                <li class="test">
                    <form action="/login" class="d-flex">
                      <button class="btn btn-outline-success" type="submit">Login</button>
                    </form>
                </li>
                <li class="test">
                    <form action="/logout" class="d-flex">
                      <button class="btn btn-outline-success">Logout</button>
                    </form>
                </li>
            </ul>
        </div>
    </nav>

<!-- 데이터 가운데 정렬, Header 와 Contents 간의 공백 주기 -->
<div class="container" > <!-- style="margin-top: 20px" -->
    <div id="current_time" style="text-align: right; margin-top: 10px"></div>

    {% block contents %}
{#    <!-- 여기 contents replace -->#}
    {% endblock %}
</div>

<!-- 날씨 정보 사용 -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>

<!-- 드롭다운 메뉴 -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>

</body>

</html>

<!-- 자바스크립트 함수(시계) -->
<script>
    /* 자바스크립트 함수(시계) */
    function current_datetime() {
        const today = new Date();

        const yr = today.getFullYear();
        const mh = today.getMonth() + 1;
        const da = today.getDay();
        const hh = today.getHours();
        const mi = today.getMinutes();
        const ss = today.getSeconds();

        // html document의 id를 찾아서 innerHTML에 우측값을 집어넣음
        document.getElementById("current_time").innerHTML = yr + ":" + `${mh<10 ? `0${mh}`:mh}:${da<10 ? `0${da}`:da}:${hh<10 ? `0${hh}`:hh}:${mi<10 ? `0${mi}`:mi}:${ss<10 ? `0${ss}`:ss}`;
    }

    // 1초마다 함수 호출
    setInterval(current_datetime, 1000);
{#</script>#}
{##}
{#<!-- 자바스크립트 함수(날씨) -->#}
{#<script>#}
    /* 자바스크립트 함수(날씨) */
    if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition(getweather);
    }

    function getweather(position) {
        const latitude = position.coords.latitude;
        const longitude = position.coords.longitude;
        console.log('latitude = ' + latitude);
        console.log('longitude = ' + longitude);
        const apiKey = "c10e58684c8fc21d6771342fe25e50fe";

        $.getJSON("http://api.openweathermap.org/data/2.5/weather?lat=" + latitude + "&lon=" + longitude + "&appid=" + apiKey, function(data) {
            const city_name = data["name"];

            const country_name = data["sys"]["country"];
            const weather_description = data["weather"][0]["description"];
            const temp = data["main"]["temp"] - 273;
            const icon = data["weather"][0]["icon"];

            $("#city_name").html(city_name + " &#40; " + country_name + "&#41; ");
            $("#temp").html(Math.round(temp) + '&deg;' + 'C');
            $("weather_description").html(weather_description);

            const imgsrc = "http://openweathermap.org/img/wn/" + icon + "@2x.png";
            $("#weather_icon").attr('src', imgsrc);
            });
    }
</script>